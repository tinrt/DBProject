CREATE TABLE Player (
    player_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    username VARCHAR2(50) UNIQUE NOT NULL,
    Fname VARCHAR2(50),
    Lname VARCHAR2(50),
    email VARCHAR2(100) UNIQUE NOT NULL,
    password_hash VARCHAR2(100) NOT NULL,
    balance NUMBER(10,2) DEFAULT 0,
    date_joined DATE DEFAULT SYSDATE
);

CREATE TABLE Admin (
    admin_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    username VARCHAR2(50) UNIQUE NOT NULL,
    password_hash VARCHAR2(100) NOT NULL
);

CREATE TABLE Sport (
    sport_type VARCHAR2(30) PRIMARY KEY
);



CREATE TABLE Team (
    team_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    sport_type VARCHAR2(30),
    team_name VARCHAR2(100),
    FOREIGN KEY (sport_type) REFERENCES Sport(sport_type)
);

CREATE TABLE MatchGame (
    match_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    team_1 NUMBER,
    team_2 NUMBER,
    admin_id NUMBER,
    match_date DATE,
    status VARCHAR2(20) CHECK (status IN ('upcoming', 'live', 'finished')),
    final_score VARCHAR2(20),
    match_location VARCHAR2(100),
    FOREIGN KEY (team_1) REFERENCES Team(team_id),
    FOREIGN KEY (team_2) REFERENCES Team(team_id),
    FOREIGN KEY (admin_id) REFERENCES Admin(admin_id)
);


CREATE TABLE Team_Match (
    team_match_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    match_id NUMBER,
    team_id NUMBER,
    FOREIGN KEY (match_id) REFERENCES MatchGame(match_id),
    FOREIGN KEY (team_id) REFERENCES Team(team_id)
);

CREATE TABLE Odds (
    odds_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    match_id NUMBER,
    admin_id NUMBER,
    team_1_odds NUMBER(5,2),
    team_2_odds NUMBER(5,2),
    draw_odds NUMBER(5,2),
    odds_date DATE DEFAULT SYSDATE,
    FOREIGN KEY (match_id) REFERENCES MatchGame(match_id),
    FOREIGN KEY (admin_id) REFERENCES Admin(admin_id)
);


CREATE TABLE Bet (
    bet_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    player_id NUMBER,
    match_id NUMBER,
    odds_id NUMBER,
    bet_type VARCHAR2(20),
    bet_amount NUMBER(10,2),
    potential_payout NUMBER(10,2),
    bet_status VARCHAR2(20) CHECK (bet_status IN ('pending', 'won', 'lost', 'canceled')),
    time_placed TIMESTAMP DEFAULT SYSTIMESTAMP,
    FOREIGN KEY (player_id) REFERENCES Player(player_id),
    FOREIGN KEY (match_id) REFERENCES MatchGame(match_id),
    FOREIGN KEY (odds_id) REFERENCES Odds(odds_id)
);


CREATE TABLE Player_Transaction (
    transaction_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    player_id NUMBER,
    amount NUMBER(10,2),
    transaction_type VARCHAR2(20) CHECK (transaction_type IN ('deposit', 'withdrawal', 'bet')),
    transaction_date DATE DEFAULT SYSDATE,
    transaction_time TIMESTAMP DEFAULT SYSTIMESTAMP,
    status VARCHAR2(20),
    FOREIGN KEY (player_id) REFERENCES Player(player_id)
);











